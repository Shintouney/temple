I"Ò(function() {
  var nextLessonIdReserved, ready;

  nextLessonIdReserved = null;

  ready = function() {
    var roomClass;
    nextLessonIdReserved = $('.calendar').data('events-current-lesson-id');
    $.fn.fullCalendar.defaults = {
      timezone: 'Europe/Paris',
      defaultView: 'agendaWeek',
      locale: 'fr',
      minTime: '07:00:00',
      maxTime: '23:00:00',
      slotEventOverlap: false,
      allDaySlot: false,
      height: 'auto',
      header: {
        left: 'prev today',
        center: "title",
        right: "month,agendaWeek,agendaFiveDay,agendaDay next"
      },
      eventLimit: true,
      views: {
        agendaFiveDay: {
          type: 'agenda',
          duration: {
            days: 5
          },
          buttonText: $('data-i18n-calendarFiveDays').data()
        }
      },
      loading: function(isLoading, view) {
        if (isLoading) {
          return window.fullcalendar_loading = true;
        }
      },
      eventAfterAllRender: function(view) {
        return window.fullcalendar_loading = false;
      },
      eventDataTransform: function(event) {
        event.className = roomClass(event);
        return event;
      },
      eventRender: function(event, element) {
        element.data('url', '/admin/lessons/' + event.id);
        return element.attr('id', 'lesson_' + event.id);
      },
      eventAfterRender: function(event, element, view) {
        if (view.name === "agendaWeek" || view.name === "agendaFiveDay" || view.name === "agendaDay") {
          if (event.room === '1' || event.room === '4' || event.room === '5' || event.room === '6') {
            return element.css({
              right: "67%",
              left: "1%"
            });
          } else if (event.room === '2') {
            return element.css({
              right: "33%",
              left: "34%"
            });
          } else {
            return element.css({
              right: "1%",
              left: "68%"
            });
          }
        }
      }
    };
    return roomClass = function(event) {
      var cssClass;
      cssClass = [];
      switch (event.room) {
        case "1":
          cssClass.push('calendar-boxing-ring');
          break;
        case "2":
          cssClass.push('calendar-punching-bag');
          break;
        case "3":
          cssClass.push('calendar-arsenal');
          break;
        case "4":
          cssClass.push('calendar-boxing-ring-no-opposition');
          break;
        case "5":
          cssClass.push('calendar-boxing-ring-no-opposition_advanced');
          break;
        case "6":
          cssClass.push('calendar-boxing-ring-feet-and-fist');
          break;
        default:
          cssClass.push('bg-danger');
      }
      if (!event.available) {
        cssClass.push('calendar-full-lesson');
      }
      if (nextLessonIdReserved === event.id) {
        cssClass.push('calendar-booked-lesson');
      }
      return cssClass.join(' ');
    };
  };

  $(document).ready(ready);

}).call(this);
:ET