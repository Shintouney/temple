class Data
  class InvoiceUserSept
    USER_LIST = %i(
    anthonyvibert@hotmail.com
    filip@cocomo.fr
    axelkiener@yahoo.fr
    stephanebenouaich@gmail.com
    lamy@owenscorp.com
    coach.staiv@gmail.com
    ovesperini@yahoo.fr
    sandrine_mouchet@orange.fr
    gillesvedrenne@hotmail.fr
    nefati.moad@gmail.com
    pcadi@free.fr
    aurelbessahli@gmail.com
    tgd@gauthier-delmas.fr
    raphael.bnm@gmail.com
    karelbalas@me.com
    art.porre@gmail.com
    lesleywood39@gmail.com
    gregoire.hervet@yahoo.fr
    victor.mendras@gmail.com
    deshayestheodore@gmail.com
    fisch.mathias@gmail.com
    o.thienot@ecoleduvin.com
    n.depardieu@gmail.com
    cesar.rodriguez-montes@lfpi.fr
    thibault_laupretre@yahoo.com
    e_karasinska@hotmail.com
    stanislas.gulczynski@gmail.com
    aurore.jaugin@gmail.com
    charles.coville@wanadoo.fr
    lorendenis@gmail.com
    gfekkai@gmail.com
    fabrice.staad@gmail.com
    jeremie.krief84@gmail.com
    julien.villemonteix@gmail.com
    david.renvoi@nym.hush.com
    aerouart@yahoo.com
    jimmynouche@gmail.com
    charlesdrd@gmail.com
    christophe.bourasseau@gmail.com
    arnaud.gensac@gmail.com
    guyot_decorateur@hotmail.com
    olivier.labbe@bcconsulting.fr
    fahd.jamai@outlook.com
    malletbenedicte@yahoo.fr
    pgveron@yahoo.fr
    florian.cadier@ardian-investment.com
    hugues.lam.thomas@gmail.com
    cg253@mac.com
    bpipat@me.com
    pierrebefre@hotmail.fr
    mickael.duarte91@gmail.com
    pierrecsc@hotmail.com
    hubmangin@gmail.com
    gaelreyre@free.fr
    fusella@hotmail.fr
    c.verroust@gmail.com
    marie.bacqmorelle@gmail.com
    ombeline.choupin@gmail.com
    lionelbenatia@gmail.com
    jeremydauchez@hotmail.fr
    alain.geraldine@gmail.com
    christian@rumeurpublique.fr
    julienrichard.perso@gmail.com
    rabier.stf@orange.fr
    xaviercontact@gmail.com
    a.purvis@ymail.com
    andrealban@mac.com
    alexandreasgarinia@gmail.com
    jean_francois_germa@hotmail.com
    morgantrabelsi@gmail.com
    eric.broet@gmail.com
    emmanuel.mace@gmail.com
    jpaulcastex@gmail.com
    isoardiarnaud@hotmail.fr
    maximeautret@gmail.com
    borisalgarra@hotmail.fr
    j.patteyn@yahoo.com
    lucietch@hotmail.fr
    stephane_galati@hotmail.com
    steven.perez@wanadoo.fr
    marinethersiquel@outlook.fr
    gaylord@mazelier.fr
    mohamed.zayani@gmail.com
    valentin.joos@gmail.com
    service-membres@temple-nobleart.fr
    romaindufau@hotmail.com
    rezgui.abdelhakim@gmail.com
    dorothee.bergal@gmail.com
    thomas.soumeillan@essec.edu
    pierre.dubouchet@diplomatie.gouv.fr
    jeremytrequesser@gmail.com
    renaud.seligmann@hotmail.fr
    ilan.delouis@gmail.com
    aurelie@beausouci.com
    olivierpineau@hotmail.com
    david.kruk@outlook.fr
    jo@scp-jo.com
    julien@daroc.fr
    souzou6@hotmail.com
    ecastelli@hotmail.fr
    anthony.demarle@gmail.com
    thomasforin@gmail.com
    garicohen@orange.fr
    tebouln@gmail.com
    irfane.goulamhoussen@ca-cib.com
    kezho@me.com
    thomas@trusk.com
    mederic.mellerio@gmail.com
    alice.faucon@wanadoo.fr
    plum.stanislas@gmail.com
    jeremy.sport@gmail.com
    fddeclere@hotmail.com
    lburel@gmail.com
    adrienchenel@gmail.com
    lucille.madariaga@wanadoo.fr
    a-moine@hotmail.fr
    arrighi@gmail.com
    fournethomas@gmail.com
    benyahia.kamil@gmail.com
    belloiralex@yahoo.fr
    louismarin.carlier@gmail.com
    carole.logiez@orange.fr
    alexandrabarcia@gmail.com
    dimitri.parraud@gmail.com
    youwakimdavid@gmail.com
    vincent.hocq@gmail.com
    francois.gratiot@posteo.net
    g.defreminville@gmail.com
    nicolas.haby@live.fr
    yael1306@gmail.com
    h.megret@gmail.com
    dikapincon@gmail.com
    rueda.antoine@gmail.com
    nessim.khalfi@gmail.com
    firdamine@hotmail.com
    stawski.nicolas@gmail.com
    helene_falchier@yahoo.fr
    surlacorde@gmail.com
    sofiane.abdelaziz@gmail.com
    guyom@colboc.com
    derycke.jean@gmail.com
    gaspardmurphy@me.com
    hugues.piazza@gmail.com
    younes.elgarti@gmail.com
    chloe.serfaty@gmail.com
    shushy@hotmail.fr
    stephane.darrasse@hotmail.fr
    lawrence.da@hotmail.com
    quentinpm@hotmail.com
    dino.falduto@gmail.com
    alexandre@pochon.eu
    geraudlegoaziou@gmail.com
    k.labruyere@orange.fr
    edouardbobin@gmail.com
    fr.baranger@gmail.com
    nicolas.chatellain@gmail.com
    pauline.santini@gmail.com
    clement.gagey@gmail.com
    car0.laurent@free.fr
    chrystelmartens@yahoo.fr
    ml.pesenti@hotmail.fr
    francois.clement7@orange.fr
    celia.batouche12@gmail.com
    dinia.batouche@gmail.com
    audrey.berling@opusline.fr
    omazurais@wanadoo.fr
    arnaudgilberton@gmail.com
    i.pavlovic75@gmail.com
    ateba.m.m@gmail.com
    cavaillethierry@hotmail.fr
    alban.de.belloy@gmail.com
    jb@giraud.cc
    tanguyvalery@gmail.com
    bo@solferinoassocies.com
    pierre_pedrosa@hotmail.com
    anis.kara.giaoui@gmail.com
    augustinbezier@gmail.com
    julien.evf@hotmail.fr
    v.rodier@yahoo.fr
    romfouch@hotmail.com
    mounia.chakor.alami@gmail.com
    thomas_lapierre@hotmail.com
    alexis.collon@gmail.com
    ghafir@gdenergies.fr
    johannabros01@gmail.com
    xavier.matharan@parme-avocats.com
    jdetychey@gmail.com
    henri.mion@gmail.com
    benjamin.angles@gmail.com
    maximeassamoi@gecina.fr
    rocheft2@yahoo.fr
    guillaume.gibon@orange.fr
    guillaumedechanterac@free.fr
    pauline.larroque@yahoo.fr
    alexlartigue@gmail.com
    clement.puren@gmail.com
    dominique.garconnet@wanadoo.fr
    thibault.trillat@gmail.com
    idrishebbat@gmail.com
    alexandre.jourda@hotmail.fr
    benjamindenizeau@hotmail.com
    huang.ailike@gmail.com
    manuel.flam@gmail.com
    ben.cohenzardi@gmail.com
    jer@athinaconseil.com
    aviodreiser@gmail.com
    arnaud.blachon@gmail.com
    abel.soullier@gmail.com
    lavarenne.immobilier@gmail.com
    t.jomier@hotmail.fr
    taharkedous@yahoo.fr
    lili.lurquin@gmail.com
    tdeljesus@live.fr
    yacinebelka@yahoo.fr
    bcasadevall@gmail.com
    rovecchio.nicolas@gmail.com
    romain.cousi@gmail.com
    dplantevin@gmail.com
    lewis.eiffelexperts@gmail.com
    meilleuramiparis@gmail.com
    shimei_li@hotmail.com
    jeanphcollet@gmail.com
    detrie.a@gmail.com
    bordonaro2000@yahoo.fr
    bterdjman@gmail.com
    benjam-p@hotmail.fr
    rymbecher@gmail.com
    marc.lauzeral@gmail.com
    thomas.silberzahn@gmail.com
    benjamin.nvdb@gmail.com
    renatacollado@gmail.com
    raphaelzimeray@me.com
    jkuperberg@hotmail.com
    lan.marie2@gmail.com
    johann_haziza@hotmail.com
    a.grana2@gmail.com
    fmazeron@gmail.com
    theo.siproudhis@gmail.com
    f.belleil@gmail.com
    wissam.zaiter@gmail.com
    alondelieme@gmail.com
    larsblokstra@hotmail.com
    marclesagemoretti@gmail.com
    julien.sebastien@allenovery.com
    gwen.gicquel@gmail.com
    acadorel@gmail.com
    leonard7006@gmail.com
    flo.landry@yahoo.fr
    olivier-coucke@orange.fr
    b.di.crescenzo@hotmail.com
    adel.derbali@gmail.com
    raphaelbagdassarian@gmail.com
    r.wakim@avangard.ch
    charlotte-runge@hotmail.fr
    juliec.runge@gmail.com
    spaillotin@gmail.com
    hoareau.vxl@paris.notaires.fr
    arouramesh@yahoo.fr
    jules.troubat@essec.edu
    christophehue@orange.fr
    julienproffit@gmail.com
    tommygraven@me.com
    fabien@labeldeco-paris.com
    guillaume@safetics.com
    adele.sennelier@icloud.com
    warren@entouragerecrutement.com
    jesus_curro94@hotmail.com
    benjamin.desaint@yahoo.fr
    gregoire.chalons@hotmail.fr
    julieaslanian@gmail.com
    sebastien.78570@gmail.com
    xavierlouisealexandrine@gmail.com
    edouardsaragoussi@gmail.com
    lauram.millet@gmail.com
    gerald.bronner@gmail.com
    maneek.babber@gmail.com
    aurelia.scheck@gmail.com
    laurent.benamron@me.com
    ullmann.sacha@gmail.com
    mathieubrac@gmail.com
    p.benedicte@live.fr
    paul-louis.royer@gadz.org
    ph_pichon@yahoo.fr
    romain.zanier@gmail.com
    dimegliofrank@gmail.com
    aurelienvargas@gmail.com
    franck9066@gmail.com
    arundussol@gmail.com
    alexandre.labbe@jeca.fr
    pierre.leroux@lemonlearning.fr
    camille.vanneau@gmail.com
    jasminesemlali2014@gmail.com
    chartronadrien@gmail.com
    thibault.jaigu@gmail.com
    lamseckmarc@icloud.com
    dpadeau@yahoo.fr
    romain.gere37@gmail.com
    cisse244@gmail.com
    constantin_esanou@hotmail.com
    cha.seguin@gmail.com
    gaetano.talamo@hotmail.com
    barbara-beaute@live.fr
    cesar.routier@hotmail.fr
    fiona.granjon@gmail.com
    gabriel@woodoo.io
    ml.laurian@gmail.com
    jerome@ringstarfrance.com
    solen97@hotmail.fr
    laurentpartouche77@gmail.com
    tormoseric@live.fr
    damien.vert13@gmail.com
    grolier.e@gmail.com
    tabeagle4@hotmail.com
    edmond.tahar@gmail.com
    gcossou@gmail.com
    matfafin@gmail.com
    colinehocquette@gmail.com
    gmiroux@me.com
    guillaumemonnier@live.fr
    ngauthey@hotmail.com
    xavier@atieh.org
    tommy.gross@hotmail.fr
    ianfaure@hotmail.com
    infantino.tony@gmail.com
    bourlebastien@gmail.com
    geoffreylebrun@hotmail.fr
    antoine.bouteil@gmail.com
    gregoirenaturel@gmail.com
    thprin@gmail.com
    wilson.romain@gmail.com
    francoise.gozlan.ide@gmail.com
    alexandrebenattar@orange.fr
    severe.charles@gmail.com
    namyphilippine@gmail.com
    damien.defforey@icloud.com
    annesophie_jourdain@yahoo.fr
    maximechampoux@icloud.com
    ch.ducruet@gmail.com
    donia.khan@hotmail.fr
    mulkeruner@gmail.com
    bastien.weulersse@gmail.com
    perez.samuel014@gmail.com
    tanguylahaye@gmail.com
    vnatkin@gmail.com
    lsebah@mac.com
    marc.morhaim@yahoo.fr
    julien.claisse@dauphine.fr
    sarahhachi@hotmail.com
    sabriberbar@yahoo.fr
    gur.eren@hotmail.com
    i-arnaud-meyson@hotmail.fr
    jacquespop@me.com
    clemence.marchisio@gmail.com
    paulconquet@gmail.com
    neville.baron@gmail.com
    florianjacob99@gmail.com
    charlotte.pittaluga@live.fr
    emmanuellequilichini@hotmail.fr
    chabanetaberkane@gmail.com
    benymorhaim@hotmail.com
    baloukay@gmail.com
    justinerojat@gmail.com
    b.dameme@gmail.com
    olivier.croce@skeelz.com
    alexandraassouad@hotmail.com
    thomasdayez59@gmail.com
    g.vieira92400@gmail.com
    charles_hunsinger@hotmail.fr
    thofillyg@gmail.com
    thierry.chrysostome@orange.fr
    fullseb@hotmail.fr
    antoine.lplc@gmail.com
    hicham.tarmidi@gmail.com
    jm-3@hotmail.fr
    stephaneseke@gmail.com
    joachim.pinto@hec.edu
    b.lombarteix@gmail.com
    leste11@student.monash.edu
    ge.luiggi@gmail.com
    th.hernandez@gmail.com
    lucchesi.elypse@gmail.com
    atelierduprimeur@gmail.com
    jackson.hcb@gmail.com
    guillaume@tom.travel
    g-vincent-@hotmail.fr
    mc.riolacci@gmail.com
    jimfrida@me.com
    vittorio.sagot@gmail.com
    rafael.nunez@free.fr
    jpbourdier@me.com
    philip.israel@sciencespo.fr
    cyril@lebuspalladium.com
    livtamer@icloud.com
    antforcade@gmail.com
    mathieu.desanlazaro@cwassocies.com
    tania@soundwalk.com
    lucienboullai@gmail.com
    mikael.choukroun@wanadoo.fr
    hello@stephaniepfeiffer.com
    victor.gilbertdevautibault@ieseg.fr
    tardieux.thomas@gmail.com
    jeremy.fournier@me.com
    uchanteur@nice-colors.com
    marvin.gentil@gmail.com
    julienrey@protonmail.com
    myunesm@gmail.com
    patylob@hotmail.com
    brdenkmanu@gmail.com
    camille.haetty@gmail.com
    mariejunger@gmail.com
    gloiret@icloud.com
    charles.geneste@gmail.com
    m.delaperriere@gmail.com
    brion.pauline@yahoo.fr
    romancost00@gmail.com
    james.debos@eventime-group.com
    lellouchejeremy@icloud.com
    benoist.bihan@hotmail.com
    olivier726@gmail.com
    richardbouskila@gmail.com
    m.azroumbaze@gmail.com
    biousse@gmail.com
    pelaurens@hotmail.com
    thominette@rtvlaw.com
    guillaume.goudal@gmail.com
    carochiche@hotmail.com
    chloee-r@hotmail.fr
    khalefsmaoui@gmail.com
    will_it_became@hotmail.com
    alexandre_pancrazi@hotmail.fr
    n.desmard@groupe-quartus.com
    asma.bekhouche24@gmail.com
    john01paris@gmail.com
    debois.claudia@gmail.com
    comefrancois@hotmail.com
    nicolas.liberman@gmail.com
    edouard.debre@gmail.com
    witnessevent@gmail.com
    charlie.debs@hotmail.com
    c.dalmeida@live.fr
    pmaaboulker@gmail.com
    thomas.barreau@skema.edu
    rom1.malinowski@gmail.com
    sami.bourassi@gmail.com
    baptiste.larmande@gmail.com
    samir.ezzaoui@gmail.com
    tara.dabinovic@eicar.me
    gregory.bennarrouche@gmail.com
    arthurbrami@gmail.com
    st.topalian@gmail.com
    benjaminguedj@gmail.com
    amir.mostaed@imj-prg.fr
    antoinevalroff@hotmail.fr
    edouard.delfour@gmail.com
    oclimaud@gmail.com
    olivier.cadinot@gmail.com
    creation.globus@gmail.com
    ddb@lek.com
    jmouyeket@gmail.com
    defeo.gian@gmail.com
    sebpusk@gmail.com
    mohamed@ggtech.fr
    comanac.veaceslav@gmail.com
    arnaud.philipps@gmail.com
    wendybijaoui@gmail.com
    perrono_adams@hotmail.fr
    contact@rhai.fr
    fabrizio.rennella@outlook.fr
    ilana.kohn@gmail.com
    hatimeouali@gmail.com
    hotelstrains@yahoo.fr
    morgan.leveel@gmail.com
    guelf73@hotmail.com
    noemieplissonneau@gmail.com
    wedze@hotmail.fr
    guillaume_fallou@hotmail.com
    pool.by@gmail.com
    guilhemc75@gmail.com
    magali.rheinknudsen@gmail.com
    vtincelin@hotmail.com
    marie.grammatico@yahoo.fr
    william.eldin@gmail.com
    sebelshout@hotmail.com
    vanessarevollo@gmail.com
    bpinatel@yahoo.fr
    valery.morelli@mac.com
    arnault.devis@gmail.com
    contact.alkoma@gmail.com
    jfra.martino@gmail.com
    cliojalabert@gmail.com
    anne.beatrix13@gmail.com
    foteini.pangos@gmail.com
    lucienbouchaaya@gmail.com
    px.hatt@gmail.com
    birdcall@laposte.net
    ad.pignol@gmail.com
    victorkam888@gmail.com
    rchantelot@lpalaw.com
    blezard_jonathan@hotmail.com
    huang.xiaomei1985@gmail.com
    aymararnulf@hotmail.com
    roudie_thomas@yahoo.fr
    contact@globaldiagnostic.fr
    jouanounou@hotmail.fr
    irisbauer23@yahoo.com
    lucile.bianchi@gmail.com
    nesslive@hotmail.com
    hugo.mouclier@orange.fr
    contact@sommetrealtors.com
    nourbentchikou@gmail.com
    anthonygolan@hotmail.fr
    erezlecontact1@gmail.com
    jeremy.griffin@hsf.com
    marchaisrichard@yahoo.fr
    maryline.robalo@gmail.com
    syntheses.biologiques@gmail.com
    jieyzaguirre@gmail.com
    sara.gwiazda@freshfields.com
    chanteloup.th@gmail.com
    thomas.bauder@canal-plus.com
    florian.ferry@live.fr
    alban.rivoal@funradio.fr
    amanda.zhou.fr@gmail.com
    daniel.r.93@hotmail.fr
    lauredeschamps@hotmail.com
    jissakidis@yahoo.com
    nr.chiadmi@gmail.com
    alexandre.selabo@hotmail.fr
    eric.bienkovelbienek@gmail.com
    luciafloresguevara@gmail.com
    paulmirabel@gmail.com
    zinedl@outlook.fr
    dounya.guenifi@yahoo.fr
    aouadisarah69@gmail.com
    elizabethaliceolson@gmail.com
    dimitri@pellicool.com
    stephane@enovap.com
    vivijacob29@yahoo.fr
    jeancharles.guillou@gmail.com
    benassijulien@gmail.com
    amor_mohamed@hotmail.fr
    maxime.gouirand@protonmail.com
    nassim.ben@me.com
    laura.mulet-marage@hotmail.fr
    kamil.elkhatib@gmail.com
    mburrus@emerige.com
    theovonbom@gmail.com
    arthurmaisonnier@gmail.com
    bruno.tassoumian@gmail.com
    p.arminjon@gmail.com
    arnaudmamour@gmail.com
    grivasseau@laposte.net
  )

    def initialize()
      @user_list = USER_LIST
      @user_count = 0
    end

    def call
      check_invoices
    end

    private

    def check_invoices
      @invoices = []
      @user_list.each do |user|
        user = User.find_by_email user
        if user
          @invoices << user.invoices&.where.not(next_payment_at: nil).order('next_payment_at DESC').first
          check_if_user_has_sepa_waiting(user)
        end
      end
      return @user_count
    end

    def check_if_user_has_sepa_waiting(user)
      invoices = user.invoices.where('next_payment_at BETWEEN ? AND ?', Date.new(2020, "07".to_i, 8), DateTime.new(2020, 10, 31))
      if invoices&.first.present?
        @user_count = @user_count + 1
        puts invoices.first.next_payment_at
        puts invoices.first.state
        puts invoices.first.user.email
        update_invoice invoices.first
      end
    end

    def update_invoice invoice
      invoice.next_payment_at = Date.new(2020, 07, 9)
      invoice.end_at = Date.new(2020, 07, 9)
      invoice.save
    end
  end
end
